<Type Name="IEnlistmentNotification" FullName="System.Transactions.IEnlistmentNotification">
  <Metadata><Meta Name="ms.openlocfilehash" Value="36a329fa5a579cd92ba234295630238f8883f58d" /><Meta Name="ms.sourcegitcommit" Value="055a4a82a0b08bfbdc21bd1347fb71f7fe2c099e" /><Meta Name="ms.translationtype" Value="MT" /><Meta Name="ms.contentlocale" Value="pl-PL" /><Meta Name="ms.lasthandoff" Value="08/15/2019" /><Meta Name="ms.locfileid" Value="69143472" /></Metadata><TypeSignature Language="C#" Value="public interface IEnlistmentNotification" />
  <TypeSignature Language="ILAsm" Value=".class public interface auto ansi abstract IEnlistmentNotification" />
  <TypeSignature Language="DocId" Value="T:System.Transactions.IEnlistmentNotification" />
  <TypeSignature Language="VB.NET" Value="Public Interface IEnlistmentNotification" />
  <TypeSignature Language="C++ CLI" Value="public interface class IEnlistmentNotification" />
  <TypeSignature Language="F#" Value="type IEnlistmentNotification = interface" />
  <AssemblyInfo>
    <AssemblyName>System.Transactions</AssemblyName>
    <AssemblyVersion>2.0.0.0</AssemblyVersion>
    <AssemblyVersion>2.0.5.0</AssemblyVersion>
    <AssemblyVersion>4.0.0.0</AssemblyVersion>
  </AssemblyInfo>
  <AssemblyInfo>
    <AssemblyName>netstandard</AssemblyName>
    <AssemblyVersion>2.0.0.0</AssemblyVersion>
    <AssemblyVersion>2.1.0.0</AssemblyVersion>
  </AssemblyInfo>
  <AssemblyInfo>
    <AssemblyName>System.Transactions.Local</AssemblyName>
    <AssemblyVersion>4.0.0.0</AssemblyVersion>
    <AssemblyVersion>4.0.1.0</AssemblyVersion>
  </AssemblyInfo>
  <Interfaces />
  <Docs>
    <summary><span data-ttu-id="fd5c1-101">Opisuje interfejs, który powinien być zaimplementowany przez Menedżera zasobów, aby zapewnić dwa wywołania zwrotne powiadomień o zatwierdzeniu przez Menedżera transakcji w przypadku rejestracji w celu uczestnictwa.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-101">Describes an interface that a resource manager should implement to provide two phase commit notification callbacks for the transaction manager upon enlisting for participation.</span></span></summary>
    <remarks>
      <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="fd5c1-102">Aby Menedżer zasobów mógł uczestniczyć w transakcji, musi zarejestrować się w transakcji za pomocą Menedżera transakcji.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-102">In order for a resource manager to participate in a transaction, it must enlist in the transaction through the transaction manager.</span></span> <span data-ttu-id="fd5c1-103"><xref:System.Transactions.Transaction> Klasa definiuje zestaw metod, których nazwy zaczynają się od `Enlist` tę funkcję, która udostępnia.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-103">The <xref:System.Transactions.Transaction> class defines a set of methods whose names begin with `Enlist` that provide this functionality.</span></span> <span data-ttu-id="fd5c1-104">Poszczególne `Enlist` metody odpowiada różnego rodzaju rejestracji, które mogą mieć Menedżera zasobów.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-104">The different `Enlist` methods correspond to the different types of enlistment that a resource manager may have.</span></span>  
  
 <span data-ttu-id="fd5c1-105">Ta klasa opisuje interfejs, który powinien być zaimplementowany przez Menedżera zasobów, aby zapewnić dwa wywołania zwrotne powiadomień o zatwierdzeniu przez Menedżera transakcji w przypadku rejestracji w celu uczestnictwa.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-105">This class describes an interface that a resource manager should implement to provide two phase commit notification callbacks for the transaction manager upon enlisting for participation.</span></span> <span data-ttu-id="fd5c1-106">Dla każdej implementacji <xref:System.Transactions.IEnlistmentNotification> interfejsu w Menedżerze zasobów należy zarejestrować ją <xref:System.Transactions.Transaction.EnlistVolatile%2A> przy użyciu metody <xref:System.Transactions.Transaction> lub <xref:System.Transactions.Transaction.EnlistDurable%2A> metody klasy, w zależności od tego, czy zasób jest trwały czy trwały.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-106">For each resource manager's implementation of the <xref:System.Transactions.IEnlistmentNotification> interface, you should enlist it using the <xref:System.Transactions.Transaction.EnlistVolatile%2A> method or the <xref:System.Transactions.Transaction.EnlistDurable%2A> method of the <xref:System.Transactions.Transaction> class, depending on whether your resource is volatile or durable.</span></span> <span data-ttu-id="fd5c1-107">Aby uzyskać więcej informacji na temat rejestracji i 2PC, zobacz temat [Rejestrowanie zasobów jako uczestników transakcji](~/docs/framework/data/transactions/enlisting-resources-as-participants-in-a-transaction.md) i [zatwierdzanie transakcji w ramach jednej fazy i wielu faz](~/docs/framework/data/transactions/committing-a-transaction-in-single-phase-and-multi-phase.md) .</span><span class="sxs-lookup"><span data-stu-id="fd5c1-107">For more information on enlistment and 2PC, see [Enlisting Resources as Participants in a Transaction](~/docs/framework/data/transactions/enlisting-resources-as-participants-in-a-transaction.md) and [Committing a Transaction in Single-Phase and Multi-Phase](~/docs/framework/data/transactions/committing-a-transaction-in-single-phase-and-multi-phase.md) respectively.</span></span>  
  
 <span data-ttu-id="fd5c1-108">Menedżer transakcji powiadamia zarejestrowany obiekt w różnych fazach protokołu zatwierdzania dwóch faz przez następujące metody.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-108">The transaction manager notifies the enlisted object at different phases of the Two Phase Commit Protocol by the following methods.</span></span>  
  
|<span data-ttu-id="fd5c1-109">Metoda</span><span class="sxs-lookup"><span data-stu-id="fd5c1-109">Method</span></span>|<span data-ttu-id="fd5c1-110">Opis</span><span class="sxs-lookup"><span data-stu-id="fd5c1-110">Description</span></span>|  
|------------|-----------------|  
|<xref:System.Transactions.IEnlistmentNotification.Prepare%2A>|<span data-ttu-id="fd5c1-111">Ta metoda zarejestrowanego obiektu jest używana jako wywołanie zwrotne przez Menedżera transakcji w pierwszej fazie transakcji, gdy Menedżer transakcji prosi uczestników o to, czy może zatwierdzić tę transakcję.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-111">This method of an enlisted object is used as a callback by the Transaction Manager during the first phase of a transaction, when the transaction manager asks participants whether they can commit the transaction.</span></span>|  
|<xref:System.Transactions.IEnlistmentNotification.Commit%2A>|<span data-ttu-id="fd5c1-112">Ta metoda zarejestrowanego obiektu jest używana jako wywołanie zwrotne przez Menedżera transakcji w drugiej fazie transakcji, jeśli transakcja została zatwierdzona.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-112">This method of an enlisted object is used as a callback by the Transaction Manager during the second phase of a transaction if the transaction is committed.</span></span>|  
|<xref:System.Transactions.IEnlistmentNotification.Rollback%2A>|<span data-ttu-id="fd5c1-113">Ta metoda zarejestrowanego obiektu jest używana jako wywołanie zwrotne przez Menedżera transakcji w drugiej fazie transakcji, jeśli transakcja została przerwana (jest to wycofywane).</span><span class="sxs-lookup"><span data-stu-id="fd5c1-113">This method of an enlisted object is used as a callback by the Transaction Manager during the second phase of a transaction if the transaction is aborted (that is, rolled back).</span></span>|  
|<xref:System.Transactions.IEnlistmentNotification.InDoubt%2A>|<span data-ttu-id="fd5c1-114">Ta metoda zarejestrowanego obiektu jest używana jako wywołanie zwrotne przez Menedżera transakcji w drugiej fazie transakcji, jeśli transakcja jest wątpliwa.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-114">This method of an enlisted object is used as a callback by the Transaction Manager during the second phase of a transaction if the transaction is in doubt.</span></span>|  
  
> [!NOTE]
>  <span data-ttu-id="fd5c1-115">Należy pamiętać, że powiadomienia mogą nie być wysyłane sekwencyjnie lub w określonej kolejności.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-115">You should be aware that notifications might not be sent sequentially, or in a particular order.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="fd5c1-116">W poniższym przykładzie przedstawiono implementację tego interfejsu, a także zarejestrować obiekt jako uczestnik transakcji przy użyciu <xref:System.Transactions.Transaction.EnlistVolatile%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-116">The following example shows an implementation of this interface, as well as enlisting the object as a participant in a transaction using the <xref:System.Transactions.Transaction.EnlistVolatile%2A> method.</span></span>  
  
 [!code-csharp[Tx_Enlist#1](~/samples/snippets/csharp/VS_Snippets_CFX/tx_enlist/cs/enlist.cs#1)]
 [!code-vb[Tx_Enlist#1](~/samples/snippets/visualbasic/VS_Snippets_CFX/tx_enlist/vb/enlist.vb#1)]  
  
 ]]></format>
    </remarks>
    <altmember cref="T:System.Transactions.ISinglePhaseNotification" />
    <related type="Article" href="https://msdn.microsoft.com/library/786a12c2-d530-49f4-9c59-5c973e15a11d"><span data-ttu-id="fd5c1-117">Rejestrowanie zasobów jako uczestników transakcji</span><span class="sxs-lookup"><span data-stu-id="fd5c1-117">Enlisting Resources as Participants in a Transaction</span></span></related>
    <related type="Article" href="https://msdn.microsoft.com/library/694ea153-e4db-41ae-96ac-9ac66dcb69a9"><span data-ttu-id="fd5c1-118">Jednofazowe i wielofazowe zatwierdzanie transakcji</span><span class="sxs-lookup"><span data-stu-id="fd5c1-118">Committing a Transaction in Single-Phase and Multi-Phase</span></span></related>
  </Docs>
  <Members>
    <Member MemberName="Commit">
      <MemberSignature Language="C#" Value="public void Commit (System.Transactions.Enlistment enlistment);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance void Commit(class System.Transactions.Enlistment enlistment) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Transactions.IEnlistmentNotification.Commit(System.Transactions.Enlistment)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; void Commit(System::Transactions::Enlistment ^ enlistment);" />
      <MemberSignature Language="F#" Value="abstract member Commit : System.Transactions.Enlistment -&gt; unit" Usage="iEnlistmentNotification.Commit enlistment" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Transactions</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>netstandard</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>2.1.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Transactions.Local</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="enlistment" Type="System.Transactions.Enlistment" />
      </Parameters>
      <Docs>
        <param name="enlistment"><span data-ttu-id="fd5c1-119"><see cref="T:System.Transactions.Enlistment" /> Obiekt używany do wysyłania odpowiedzi do Menedżera transakcji.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-119">An <see cref="T:System.Transactions.Enlistment" /> object used to send a response to the transaction manager.</span></span></param>
        <summary><span data-ttu-id="fd5c1-120">Powiadamia zarejestrowany obiekt, który jest zatwierdzany przez transakcję.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-120">Notifies an enlisted object that a transaction is being committed.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="fd5c1-121">Menedżer transakcji wywołuje tę metodę zarejestrowanego obiektu podczas drugiej fazy zobowiązania, gdy nakazuje wszystkim uczestnikom zatwierdzenie transakcji.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-121">The transaction manager calls this method of an enlisted object during the second phase of a commitment, when it instructs all participants to commit the transaction.</span></span>  
  
 <span data-ttu-id="fd5c1-122">Menedżer zasobów powinien wykonać każdą pracę niezbędną do zakończenia transakcji, a następnie poinformować o tym, że zakończył się <xref:System.Transactions.Enlistment.Done%2A> przez wywołanie metody `enlistment` na parametrze.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-122">The resource manager should perform any work necessary to finish the transaction and then inform the TM that it has finished by calling the <xref:System.Transactions.Enlistment.Done%2A> method on the `enlistment` parameter.</span></span>  
  
 <span data-ttu-id="fd5c1-123">Jeśli Menedżer zasobów zakończył trwale, ale nie odpowiada przez wywoływanie <xref:System.Transactions.Enlistment.Done%2A> metody, Menedżer transakcji nie ma pewności, że Menedżer zasobów <xref:System.Transactions.IEnlistmentNotification.Commit%2A> odebrał wywołanie.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-123">If the resource manager has enlisted durably, but does not respond by calling <xref:System.Transactions.Enlistment.Done%2A> method, the transaction manager is unsure that the resource manager has received the <xref:System.Transactions.IEnlistmentNotification.Commit%2A> call.</span></span> <span data-ttu-id="fd5c1-124">W związku z tym Menedżer transakcji kontynuuje oczekiwanie na odpowiedź i utrzymuje informacje istotne dla tej transakcji.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-124">As such, the transaction manager keeps waiting for a response, and maintains information relevant to this transaction.</span></span>  <span data-ttu-id="fd5c1-125">Jeśli <xref:System.Transactions.Enlistment.Done%2A> nigdy nie zostanie wywołane, ta część informacji będzie utrzymywana przez czas nieokreślony w pamięci lub w zasobach systemu.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-125">If <xref:System.Transactions.Enlistment.Done%2A> is never called, this piece of information is kept around indefinitely in memory or in a system-wide resource.</span></span> <span data-ttu-id="fd5c1-126">W wyniku tego nie można odzyskiwać zasobów.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-126">This results in resources not being able to be reclaimed.</span></span> <span data-ttu-id="fd5c1-127">W przypadku transakcji rozproszonej może to spowodować zapełnienie dziennika usługi MSDTC, który zatrzymuje proces MSDTC.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-127">In the case of a distributed transaction, this could eventually fill the MSDTC log which halts the MSDTC process.</span></span> <span data-ttu-id="fd5c1-128">W przypadku transakcji zarządzanej przez <xref:System.Transactions>program powoduje stopniowe i ciągłe zwiększenie zużycia pamięci przez proces Menedżera zasobów.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-128">In the case of a transaction managed by <xref:System.Transactions>, this results in a gradual and continual increase in the memory consumption of the resource manager's process.</span></span> <span data-ttu-id="fd5c1-129">W związku z tym ważne jest, aby wywołać <xref:System.Transactions.Enlistment.Done%2A> metodę, gdy Menedżer zasobów zostanie wykonany przy użyciu przygotowania do pracy.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-129">Therefore, it is crucial that you call the <xref:System.Transactions.Enlistment.Done%2A> method once your resource manager is done with your prepare work.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="InDoubt">
      <MemberSignature Language="C#" Value="public void InDoubt (System.Transactions.Enlistment enlistment);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance void InDoubt(class System.Transactions.Enlistment enlistment) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Transactions.IEnlistmentNotification.InDoubt(System.Transactions.Enlistment)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; void InDoubt(System::Transactions::Enlistment ^ enlistment);" />
      <MemberSignature Language="F#" Value="abstract member InDoubt : System.Transactions.Enlistment -&gt; unit" Usage="iEnlistmentNotification.InDoubt enlistment" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Transactions</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>netstandard</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>2.1.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Transactions.Local</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="enlistment" Type="System.Transactions.Enlistment" />
      </Parameters>
      <Docs>
        <param name="enlistment"><span data-ttu-id="fd5c1-130"><see cref="T:System.Transactions.Enlistment" /> Obiekt używany do wysyłania odpowiedzi do Menedżera transakcji.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-130">An <see cref="T:System.Transactions.Enlistment" /> object used to send a response to the transaction manager.</span></span></param>
        <summary><span data-ttu-id="fd5c1-131">Powiadamia zarejestrowany obiekt, że stan transakcji jest wątpliwy.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-131">Notifies an enlisted object that the status of a transaction is in doubt.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="fd5c1-132">Ta metoda jest wywoływana dla zasobów lotnych, gdy Menedżer transakcji wywołał operację zatwierdzania pojedynczej fazy do pojedynczego trwałego zasobu, a następnie połączenie z trwałym zasobem zostało utracone przed pobraniem wyniku transakcji.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-132">This method is called for volatile resources when the transaction manager has invoked a single phase commit operation to a single durable resource, and then connection to the durable resource was lost prior to getting the transaction result.</span></span> <span data-ttu-id="fd5c1-133">W tym momencie nie można bezpiecznie ustalić wyniku transakcji.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-133">At that point, the transaction outcome cannot be safely determined.</span></span>  
  
 <span data-ttu-id="fd5c1-134">Jako <xref:System.Transactions.IEnlistmentNotification.InDoubt%2A> że jest uznawany za stan końcowy transakcji, nie należy wywoływać <xref:System.Transactions.IEnlistmentNotification.Commit%2A> ani <xref:System.Transactions.IEnlistmentNotification.Rollback%2A> po wywołaniu <xref:System.Transactions.IEnlistmentNotification.InDoubt%2A>.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-134">As <xref:System.Transactions.IEnlistmentNotification.InDoubt%2A> is considered to be a final state for a transaction, you should not call <xref:System.Transactions.IEnlistmentNotification.Commit%2A> or <xref:System.Transactions.IEnlistmentNotification.Rollback%2A> after calling <xref:System.Transactions.IEnlistmentNotification.InDoubt%2A>.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="fd5c1-135">Twoja implementacja tej metody dla zasobu volatile powinna wykonywać operacje odzyskiwania lub zawierania, które są zrozumiałe dla odnośnych danych.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-135">Your implementation of this method for the volatile resource should perform whatever recovery or containment operation it understands on the affected data.</span></span>  <span data-ttu-id="fd5c1-136">Musi również wywołać <xref:System.Transactions.Enlistment.Done%2A> metodę na `enlistment` parametrze w momencie zakończenia pracy.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-136">It must also call the <xref:System.Transactions.Enlistment.Done%2A> method on the on the `enlistment` parameter when it has finished its work.</span></span>  
  
 <span data-ttu-id="fd5c1-137">Jeśli Menedżer zasobów zakończył trwale, ale nie odpowiada przez wywoływanie <xref:System.Transactions.Enlistment.Done%2A> metody, Menedżer transakcji nie ma pewności, że Menedżer zasobów <xref:System.Transactions.IEnlistmentNotification.InDoubt%2A> odebrał wywołanie.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-137">If the resource manager has enlisted durably, but does not respond by calling <xref:System.Transactions.Enlistment.Done%2A> method, the transaction manager is unsure that the resource manager has received the <xref:System.Transactions.IEnlistmentNotification.InDoubt%2A> call.</span></span> <span data-ttu-id="fd5c1-138">W związku z tym Menedżer transakcji kontynuuje oczekiwanie na odpowiedź i utrzymuje informacje istotne dla tej transakcji.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-138">As such, the transaction manager keeps waiting for a response, and maintains information relevant to this transaction.</span></span>  <span data-ttu-id="fd5c1-139">Jeśli <xref:System.Transactions.Enlistment.Done%2A> nigdy nie zostanie wywołane, ta część informacji będzie utrzymywana przez czas nieokreślony w pamięci lub w zasobach systemu.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-139">If <xref:System.Transactions.Enlistment.Done%2A> is never called, this piece of information is kept around indefinitely in memory or in a system-wide resource.</span></span> <span data-ttu-id="fd5c1-140">W wyniku tego nie można odzyskiwać zasobów.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-140">This results in resources not being able to be reclaimed.</span></span> <span data-ttu-id="fd5c1-141">W przypadku transakcji rozproszonej może to spowodować zapełnienie dziennika usługi MSDTC, który zatrzymuje proces MSDTC.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-141">In the case of a distributed transaction, this could eventually fill the MSDTC log which halts the MSDTC process.</span></span> <span data-ttu-id="fd5c1-142">W przypadku transakcji zarządzanej przez <xref:System.Transactions>program powoduje stopniowe i ciągłe zwiększenie zużycia pamięci przez proces Menedżera zasobów.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-142">In the case of a transaction managed by <xref:System.Transactions>, this results in a gradual and continual increase in the memory consumption of the resource manager's process.</span></span> <span data-ttu-id="fd5c1-143">W związku z tym ważne jest, aby wywołać <xref:System.Transactions.Enlistment.Done%2A> metodę, gdy Menedżer zasobów zostanie wykonany przy użyciu przygotowania do pracy.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-143">Therefore, it is crucial that you call the <xref:System.Transactions.Enlistment.Done%2A> method once your resource manager is done with your prepare work.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="Prepare">
      <MemberSignature Language="C#" Value="public void Prepare (System.Transactions.PreparingEnlistment preparingEnlistment);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance void Prepare(class System.Transactions.PreparingEnlistment preparingEnlistment) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Transactions.IEnlistmentNotification.Prepare(System.Transactions.PreparingEnlistment)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; void Prepare(System::Transactions::PreparingEnlistment ^ preparingEnlistment);" />
      <MemberSignature Language="F#" Value="abstract member Prepare : System.Transactions.PreparingEnlistment -&gt; unit" Usage="iEnlistmentNotification.Prepare preparingEnlistment" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Transactions</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>netstandard</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>2.1.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Transactions.Local</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="preparingEnlistment" Type="System.Transactions.PreparingEnlistment" />
      </Parameters>
      <Docs>
        <param name="preparingEnlistment"><span data-ttu-id="fd5c1-144"><see cref="T:System.Transactions.PreparingEnlistment" /> Obiekt służący do wysyłania odpowiedzi do Menedżera transakcji.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-144">A <see cref="T:System.Transactions.PreparingEnlistment" /> object used to send a response to the transaction manager.</span></span></param>
        <summary><span data-ttu-id="fd5c1-145">Powiadamia zarejestrowany obiekt, że transakcja jest przygotowywana do zobowiązania.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-145">Notifies an enlisted object that a transaction is being prepared for commitment.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="fd5c1-146">Menedżer transakcji wywołuje tę metodę zarejestrowanego Menedżera zasobów w fazie 1 zobowiązania, gdy prosi uczestników, czy może zatwierdzić tę transakcję.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-146">The transaction manager calls this method of an enlisted resource manager during the phase 1 of a commitment, when it asks participants whether they can commit the transaction.</span></span>  
  
 <span data-ttu-id="fd5c1-147">Podczas implementowania Menedżera zasobów trwałych należy rejestrować swój rekord przygotowania w tej fazie.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-147">When you are implementing a durable resource manager, you should log your prepare record during this phase.</span></span> <span data-ttu-id="fd5c1-148">Rekord powinien zawierać wszystkie informacje niezbędne do przeprowadzenia odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-148">The record should contain all the necessary information to perform recovery.</span></span> <span data-ttu-id="fd5c1-149">Obejmuje <xref:System.Transactions.PreparingEnlistment.RecoveryInformation%2A> to właściwość, która jest przenoszona do Menedżera transakcji <xref:System.Transactions.TransactionManager.Reenlist%2A> w metodzie podczas odzyskiwania.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-149">This includes the <xref:System.Transactions.PreparingEnlistment.RecoveryInformation%2A> property, which is passed to the transaction manager in the <xref:System.Transactions.TransactionManager.Reenlist%2A> method during recovery.</span></span> <span data-ttu-id="fd5c1-150">Aby uzyskać więcej informacji o odzyskiwaniu, zobacz [odzyskiwanie](https://msdn.microsoft.com/library/d342c5c7-da64-4a4c-8e63-b52f4fbf2691).</span><span class="sxs-lookup"><span data-stu-id="fd5c1-150">For more information on recovery, see [Performing Recovery](https://msdn.microsoft.com/library/d342c5c7-da64-4a4c-8e63-b52f4fbf2691).</span></span>  
  
 <span data-ttu-id="fd5c1-151">Menedżer zasobów powinien ukończyć całą pracę, która musi zostać zakończona przed wywołaniem <xref:System.Transactions.PreparingEnlistment.Prepared%2A> metody parametru, `preparingEnlistment` aby wskazać jej głos na zobowiązania.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-151">Your resource manager should complete all work that must be finished before calling the <xref:System.Transactions.PreparingEnlistment.Prepared%2A> method of the `preparingEnlistment` parameter to indicate its vote for commitment.</span></span> <span data-ttu-id="fd5c1-152">Należy upewnić się, że zostało to wykonane przed odebraniem powiadomienia fazy 2, takie jak zatwierdzenie, wycofanie lub wątpliwości.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-152">You should make sure that this is accomplished before receiving any phase 2 notification such as commit, rollback or in doubt.</span></span> <span data-ttu-id="fd5c1-153">Dzieje się tak, ponieważ powiadomienia fazy 2 mogą być wbudowane w tym samym wątku, <xref:System.Transactions.PreparingEnlistment.Prepared%2A> który wywołał metodę w fazie 1.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-153">This is because phase 2 notifications can happen inline on the same thread that called the <xref:System.Transactions.PreparingEnlistment.Prepared%2A> method in phase 1.</span></span> <span data-ttu-id="fd5c1-154">W związku z tym nie należy wykonywać żadnej pracy po <xref:System.Transactions.PreparingEnlistment.Prepared%2A> wywołaniu (na przykład zwalniać blokad), które należy wykonać przed odebraniem powiadomień fazy 2.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-154">As such, you should not do any work after the <xref:System.Transactions.PreparingEnlistment.Prepared%2A> call (for example, releasing locks) that you would expect to have completed before receiving the phase 2 notifications.</span></span>  
  
 <span data-ttu-id="fd5c1-155">Możesz również wywołać metodę `preparingEnlistment` parametru, aby wskazać głos do wycofania.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-155">You can also call the method of the `preparingEnlistment` parameter to indicate a vote for rollback.</span></span>  
  
 <span data-ttu-id="fd5c1-156">Jeśli chcesz, aby obiekt miał jedynie obserwować i reagować na postęp transakcji, bez udziału w niej, implementacja tej metody powinna wywołać <xref:System.Transactions.Enlistment.Done%2A> metodę `preparingEnlistment` parametru po zakończeniu pracy.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-156">If you want the object to merely observe and react to the progress of the transaction, without participating in it, your implementation of this method should call the <xref:System.Transactions.Enlistment.Done%2A> method of the `preparingEnlistment` parameter when it has finished its work.</span></span> <span data-ttu-id="fd5c1-157">Dzięki temu Menedżer zasobów nie otrzyma żadnego powiadomienia fazy 2.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-157">By doing so, your resource manager would not receive any phase 2 notification.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="Rollback">
      <MemberSignature Language="C#" Value="public void Rollback (System.Transactions.Enlistment enlistment);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance void Rollback(class System.Transactions.Enlistment enlistment) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Transactions.IEnlistmentNotification.Rollback(System.Transactions.Enlistment)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; void Rollback(System::Transactions::Enlistment ^ enlistment);" />
      <MemberSignature Language="F#" Value="abstract member Rollback : System.Transactions.Enlistment -&gt; unit" Usage="iEnlistmentNotification.Rollback enlistment" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Transactions</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>netstandard</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>2.1.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Transactions.Local</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="enlistment" Type="System.Transactions.Enlistment" />
      </Parameters>
      <Docs>
        <param name="enlistment"><span data-ttu-id="fd5c1-158"><see cref="T:System.Transactions.Enlistment" /> Obiekt służący do wysyłania odpowiedzi do Menedżera transakcji.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-158">A <see cref="T:System.Transactions.Enlistment" /> object used to send a response to the transaction manager.</span></span></param>
        <summary><span data-ttu-id="fd5c1-159">Powiadamia zarejestrowany obiekt, że transakcja jest wycofywana (przerwana).</span><span class="sxs-lookup"><span data-stu-id="fd5c1-159">Notifies an enlisted object that a transaction is being rolled back (aborted).</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="fd5c1-160">Menedżer transakcji wywołuje tę metodę zarejestrowanego obiektu, gdy transakcja jest wycofywana (przerwana) z powodu niemożności co najmniej jednego uczestnika transakcji na zatwierdzenie transakcji.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-160">The transaction manager calls this method of an enlisted object when the transaction is being rolled back (aborted) due to the inability of one or more transaction participants to commit the transaction.</span></span>  
  
 <span data-ttu-id="fd5c1-161">Menedżer zasobów powinien wykonać każdą pracę niezbędną do zakończenia transakcji, a następnie poinformować o tym, że zakończył się <xref:System.Transactions.Enlistment.Done%2A> przez wywołanie metody `enlistment` na parametrze.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-161">The resource manager should perform any work necessary to finish the transaction and then inform the TM that it has finished by calling the <xref:System.Transactions.Enlistment.Done%2A> method on the `enlistment` parameter.</span></span>  
  
 <span data-ttu-id="fd5c1-162">Jeśli Menedżer zasobów zakończył trwale, ale nie odpowiada przez wywoływanie <xref:System.Transactions.Enlistment.Done%2A> metody, Menedżer transakcji nie ma pewności, że Menedżer zasobów <xref:System.Transactions.IEnlistmentNotification.Rollback%2A> odebrał wywołanie.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-162">If the resource manager has enlisted durably, but does not respond by calling <xref:System.Transactions.Enlistment.Done%2A> method, the transaction manager is unsure that the resource manager has received the <xref:System.Transactions.IEnlistmentNotification.Rollback%2A> call.</span></span> <span data-ttu-id="fd5c1-163">W związku z tym Menedżer transakcji kontynuuje oczekiwanie na odpowiedź i utrzymuje informacje istotne dla tej transakcji.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-163">As such, the transaction manager keeps waiting for a response, and maintains information relevant to this transaction.</span></span>  <span data-ttu-id="fd5c1-164">Jeśli <xref:System.Transactions.Enlistment.Done%2A> nigdy nie zostanie wywołane, ta część informacji będzie utrzymywana przez czas nieokreślony w pamięci lub w zasobach systemu.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-164">If <xref:System.Transactions.Enlistment.Done%2A> is never called, this piece of information is kept around indefinitely in memory or in a system-wide resource.</span></span> <span data-ttu-id="fd5c1-165">W wyniku tego nie można odzyskiwać zasobów.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-165">This results in resources not being able to be reclaimed.</span></span> <span data-ttu-id="fd5c1-166">W przypadku transakcji rozproszonej może to spowodować zapełnienie dziennika usługi MSDTC, który zatrzymuje proces MSDTC.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-166">In the case of a distributed transaction, this could eventually fill the MSDTC log which halts the MSDTC process.</span></span> <span data-ttu-id="fd5c1-167">W przypadku transakcji zarządzanej przez <xref:System.Transactions>program powoduje stopniowe i ciągłe zwiększenie zużycia pamięci przez proces Menedżera zasobów.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-167">In the case of a transaction managed by <xref:System.Transactions>, this results in a gradual and continual increase in the memory consumption of the resource manager's process.</span></span> <span data-ttu-id="fd5c1-168">W związku z tym ważne jest, aby wywołać <xref:System.Transactions.Enlistment.Done%2A> metodę, gdy Menedżer zasobów zostanie wykonany przy użyciu przygotowania do pracy.</span><span class="sxs-lookup"><span data-stu-id="fd5c1-168">Therefore, it is crucial that you call the <xref:System.Transactions.Enlistment.Done%2A> method once your resource manager is done with your prepare work.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
  </Members>
</Type>
